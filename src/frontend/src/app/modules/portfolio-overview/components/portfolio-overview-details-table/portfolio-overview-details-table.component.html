<div #portfolioOverviewDetailsTableContainer class="portfolio-overview-details-table">
  <div *ngIf="!this.isModal" class="table-buttons-row">
      <button class="airframe__icon-button table__icon" (click)="showModal()" pTooltip="Full screen" tooltipPosition="left" tooltipStyleClass="airframe-tooltip"><em class="fa fa-expand"></em></button>
      <button class="airframe__icon-button" (click)="exportExcel()" pTooltip="Download to Excel" tooltipPosition="left" tooltipStyleClass="airframe-tooltip"><em class="fa fa-download"></em></button>
  </div>

  <p-table
      [columns]="tableHeaders || []"
      [value]="tableData || []"
      [scrollable]=true
      [scrollHeight]=tableHeight
      [paginator]="true"
      [rows]="50"
      [virtualScrollItemSize]="28"
      [reorderableColumns]=true
      [resizableColumns]=true
      scrollDirection="both"
      responsiveLayout="scroll"
      sortMode="single"
      [sortField]=this.sortBy.name
      [sortOrder]="this.sortBy.sortDescending ? -1 : 1"
      [style]="{'width.px': tableWidth}"
      (onSort)="onSort($event.field, $event.order === -1)"
      class="airframe-table">

      <ng-template pTemplate="header" let-columns>
          <tr>
              <ng-container *ngFor="let column of columns; let i = index">
                  <th [ngClass]="[column.type === 'number' ? 'right-text cell-width-small' : 'cell-width-small']"
                      [ngStyle]="{'min-width': column.width + 'px'}"
                      scope="col"
                      [pSortableColumn]="column.field"
                      pResizableColumn pReorderableColumn
                      (click)="showSortIcon(column.field,i)"
                      (mouseenter)="hoverSortIcon(column.field,i, true)"
                      (mouseleave)="hoverSortIcon(column.field,i, false)">
                      <div class="column-header">
                          <span class="header-overflow">{{column.header}}</span>
                          <p-sortIcon class="sort-icon" field={{column.field}}></p-sortIcon>
                      </div>
                  </th>
              </ng-container>
          </tr>
      </ng-template>

      <ng-template pTemplate="body" let-row let-columns="columns">
          <tr class="row-overflow">
              <ng-container *ngFor="let column of columns;">
                <td [ngClass]="column.type === 'number' ? 'right-text' : ''"
                    [ngStyle]="{'min-width': column.width + 'px'}"
                    id="table-row-flexed">
                      <div *ngIf="column.type !== 'number' && column.type !== 'date'">{{row[column.field] || '-'}}</div>
                      <div *ngIf="column.type === 'number'">{{(row[column.field] | number: column.pipeFormat) || '-'}}</div>
                      <div *ngIf="column.type === 'date'">{{(row[column.field] | date: 'dd-MMM-yyyy') || '-'}}</div>
                  </td>
              </ng-container>
          </tr>
      </ng-template>

  </p-table>
</div>

<p-dialog *ngIf="displayModal" class="airframe-modal p-dialog-mask open-modal" header="Details Table" [(visible)]="displayModal" (onShow)="maximizeModal(tableModal)" (onHide)="closeModal()" #tableModal>
  <ra-portfolio-overview-details-table [isModal]=true></ra-portfolio-overview-details-table>
</p-dialog>
